{"version":3,"sources":["webpack:///./src/pages/author.vue?ef6b","webpack:///./src/pages/author.vue","webpack:///./src/pages/author.vue?74a9","webpack:///./src/pages/author.vue?06d1","webpack:///./src/pages/author.vue?ff3d"],"names":["getUrlParms","name","reg","RegExp","r","window","location","search","substr","match","unescape","code","Storage","session","set","data","AUTH_CODE","created","get","login","wxLogin","methods","isWeiXin","ua","navigator","userAgent","toLowerCase","authorizeLogin","then","res","url","$store","commit","result","token","type","para","getUserInfo","console","log","status","mounted"],"mappings":"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","file":"static/js/19.36c7953af731c1282258.js","sourcesContent":["\n/* styles */\nrequire(\"!!../../node_modules/_extract-text-webpack-plugin@2.1.2@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-59bcb5b8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":true}!../../node_modules/_vux-loader@1.2.8@vux-loader/src/after-less-loader.js!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vux-loader@1.2.8@vux-loader/src/style-loader.js!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=styles&index=0!./author.vue\")\n\nvar Component = require(\"!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/_vux-loader@1.2.8@vux-loader/src/script-loader.js!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=script&index=0!./author.vue\"),\n  /* template */\n  require(\"!!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-59bcb5b8\\\"}!../../node_modules/_vux-loader@1.2.8@vux-loader/src/before-template-compiler-loader.js!../../node_modules/_vux-loader@1.2.8@vux-loader/src/template-loader.js!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector?type=template&index=0!./author.vue\"),\n  /* scopeId */\n  \"data-v-59bcb5b8\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/author.vue\n// module id = 528\n// module chunks = 19","//\n//\n//\n//\n//\n\r\nimport Storage from 'good-storage'\r\nimport {authorizeLogin,wxLogin,getUserInfo} from 'api'\r\nfunction getUrlParms(name){\r\n    var reg = new RegExp(\"(^|&)\"+ name +\"=([^&]*)(&|$)\");\r\n    var r = window.location.search.substr(1).match(reg);\r\n    if(r!=null)\r\n    return unescape(r[2]);\r\n    return null;\r\n}\r\nlet code = getUrlParms('code')\r\nStorage.session.set('AUTH_CODE',code)\r\nexport default {\r\n    data () {\r\n        return {\r\n            AUTH_CODE: ''\r\n        }\r\n    },\r\n    created () {\r\n        this.AUTH_CODE = Storage.session.get('AUTH_CODE')\r\n        if(!getUrlParms('code')){\r\n            this.login()\r\n        }else{\r\n            this.AUTH_CODE = getUrlParms(\"code\");\r\n            let data = {\r\n                code: this.AUTH_CODE\r\n            }\r\n            this.wxLogin(data)\r\n            Storage.session.set('AUTH_CODE',this.AUTH_CODE)\r\n        }\r\n    },\r\n    methods: {\r\n        isWeiXin() {\r\n            let ua = window.navigator.userAgent.toLowerCase();\r\n            if (ua.match(/MicroMessenger/i) == 'micromessenger') {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        },\r\n        login () {\r\n            authorizeLogin().then(res =>{\r\n                if(res.code === 0){\r\n                    window.location = res.url\r\n                }\r\n            })\r\n        },\r\n        wxLogin(data) {\r\n            wxLogin(data).then(res =>{\r\n                if(res.code === 0){\r\n                    this.$store.commit('SET_TOKEN',res.result.data.token)\r\n                    this.$store.commit('SET_IDENTITYCODE',res.result.data.type)\r\n                    let para = {\r\n                        token:res.result.data.token\r\n                    }\r\n                    getUserInfo(para).then(res =>{\r\n                        if(res.code === 0){\r\n                            this.$store.commit('SET_USER',res.result.data)\r\n                        }\r\n                        console.log(res.result.data)\r\n                    })\r\n                    if(res.result.data.status === -1){\r\n                        this.wxLogin(data)\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    },\r\n    mounted () {\r\n        \r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/author.vue","exports = module.exports = require(\"../../node_modules/_css-loader@0.26.4@css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\", {\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"author.vue\",\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_css-loader@0.26.4@css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/_vue-loader@11.3.4@vue-loader/lib/style-compiler?{\"id\":\"data-v-59bcb5b8\",\"scoped\":true,\"hasInlineConfig\":true}!./~/_vux-loader@1.2.8@vux-loader/src/after-less-loader.js!./~/_less-loader@2.2.3@less-loader?{\"sourceMap\":true}!./~/_vux-loader@1.2.8@vux-loader/src/style-loader.js!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./src/pages/author.vue\n// module id = 770\n// module chunks = 19","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/_css-loader@0.26.4@css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-59bcb5b8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":true}!../../node_modules/_vux-loader@1.2.8@vux-loader/src/after-less-loader.js!../../node_modules/_less-loader@2.2.3@less-loader/index.js?{\\\"sourceMap\\\":true}!../../node_modules/_vux-loader@1.2.8@vux-loader/src/style-loader.js!../../node_modules/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./author.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/_vue-style-loader@2.0.5@vue-style-loader/lib/addStylesClient.js\")(\"20026daa\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_extract-text-webpack-plugin@2.1.2@extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/_vue-style-loader@2.0.5@vue-style-loader!./~/_css-loader@0.26.4@css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/_vue-loader@11.3.4@vue-loader/lib/style-compiler?{\"id\":\"data-v-59bcb5b8\",\"scoped\":true,\"hasInlineConfig\":true}!./~/_vux-loader@1.2.8@vux-loader/src/after-less-loader.js!./~/_less-loader@2.2.3@less-loader?{\"sourceMap\":true}!./~/_vux-loader@1.2.8@vux-loader/src/style-loader.js!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=styles&index=0!./src/pages/author.vue\n// module id = 813\n// module chunks = 19","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"page-content\"\n  })\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-59bcb5b8\"}!./~/_vux-loader@1.2.8@vux-loader/src/before-template-compiler-loader.js!./~/_vux-loader@1.2.8@vux-loader/src/template-loader.js!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./src/pages/author.vue\n// module id = 930\n// module chunks = 19"],"sourceRoot":""}